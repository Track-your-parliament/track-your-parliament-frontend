{"version":3,"sources":["Tag.js","PaginationControllers.js","voteUtils.js","VotesDialogBarChartHint.js","VotesDialogBarChart.js","VotesDialogRadialChart.js","VotesDialogContentCreator.js","VotesDialogLegend.js","VotesDialog.js","PerVoteTimeline.js"],"names":["useStyles","makeStyles","theme","chip","props","margin","spacing","fontSize","size","height","borderRadius","paddingLeft","paddingRight","Tag","text","classes","history","useHistory","label","className","onClick","e","push","window","scrollTo","top","behavior","root","display","flexDirection","justifyContent","button","buttonIconLeft","marginRight","buttonIconRight","marginLeft","paginate","data","page","perPage","slice","PaginationControllers","setPage","dataSize","variant","color","buttonIconRigth","fixJson","votes","ignored_groups","map","vote","jsonData","JSON","parse","distribution","replace","distr","filter","dist","includes","group","getTotalDistribution","total_votes","for","against","empty","away","forEach","Object","keys","vote_counts","key","tooltip","padding","tooltipValue","lineHeight","VotesDialogBarChartHint","barChartHint","voteTypes","Paper","elevation","Typography","y","entries","item","id","component","VotesDialogBarChart","diagramColors","useState","setBarChartHint","colorType","stackBy","yType","left","style","voteType","reverse","x","onValueMouseOver","v","onSeriesMouseOut","value","processDataForTotalDiagram","String","angle","VotesDialogRadialChart","animation","width","right","bottom","innerRadius","radius","padAngle","showLabels","labelsRadiusMultiplier","labelsStyle","VotesDialogContentCreator","annulled","Grid","container","xs","md","title","gutterBottom","Number","legendWrapper","legendItem","alignItems","legendColorBlock","VotesDialogLegend","justify","backgroundColor","donutPlot","xyPlot","VotesDialog","dialogOpen","setDialogOpen","Dialog","onClose","aria-labelledby","open","fullWidth","maxWidth","scroll","DialogTitle","DialogContent","dividers","decision","session","shortid","generate","annuled","DialogActions","Button","timeline","minHeight","background","palette","common","black","timelineElement","time","primary","content","contentButton","proposalLink","getLink","typeAndNumber","split","sessionAndYear","filterWithSearch","searchFilter","found","keyword_list","obj","summary","getSearchMatches","keywords","queryParams","searchParam","get","matches","keyword","PerVoteTimeline","location","useLocation","URLSearchParams","search","useMemo","dateParam","yearParam","monthParam","DateTime","fromISO","date","toISODate","year","month","filterDataWithUrl","initialData","votesData","setVotesData","Fragment","animate","layout","length","timelineelement","contentStyle","timelineStyles","default","contentArrowStyle","arrow","iconStyle","alternative","icon","position","vote_id","iconOnClick","toFormat","i","array","fromSQL","created","toISO","as","target","href","Icon","name"],"mappings":"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","file":"static/js/6.cf7ade2b.chunk.js","sourcesContent":["import React from 'react'\nimport { Chip, makeStyles } from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  chip: props => ({\n    margin: theme.spacing(1),\n    fontSize: props.size * 0.05 + 1 + 'rem',\n    height: props.size * 0.1 + 1.2 + 'rem',\n    borderRadius: props.size * 0.05 + 1 + 'rem',\n    paddingLeft: props.size * 0.01 + 'rem',\n    paddingRight: props.size * 0.01 + 'rem',\n  }),\n}))\n\nconst Tag = ({ text, size }) => {\n  const classes = useStyles({ size })\n  const history = useHistory()\n\n  const handleClick = e => {\n    history.push('/proposal?search=' + text)\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n\n  return <Chip label={text} className={classes.chip} onClick={handleClick} />\n}\n\nTag.propTypes = {}\n\nexport default Tag\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { Button } from '@material-ui/core'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBackIos'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForwardIos'\n\nconst useStyles = makeStyles(theme => {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'center',\n    },\n    button: {\n      margin: theme.spacing(1),\n    },\n    buttonIconLeft: {\n      marginRight: theme.spacing(1),\n    },\n    buttonIconRight: {\n      marginLeft: theme.spacing(1),\n    },\n  }\n})\n\nexport const paginate = (data, page, perPage) => {\n  return data.slice(page * perPage, (page + 1) * perPage)\n}\n\nconst PaginationControllers = ({ page, setPage, perPage, dataSize }) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      {page !== 0 && (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.button}\n          onClick={() => {\n            window.scrollTo({ top: 0, behavior: 'smooth' })\n            setPage(page - 1)\n          }}\n        >\n          <ArrowBackIcon className={classes.buttonIconLeft} />\n          Previous\n        </Button>\n      )}\n      {dataSize > (page + 1) * perPage && (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.button}\n          onClick={() => {\n            window.scrollTo({ top: 0, behavior: 'smooth' })\n            setPage(page + 1)\n          }}\n        >\n          Next\n          <ArrowForwardIcon className={classes.buttonIconRigth} />\n        </Button>\n      )}\n    </div>\n  )\n}\n\nPaginationControllers.propTypes = {}\n\nexport default PaginationControllers\n","export const fixJson = votes => {\n  const ignored_groups = ['Oppositioryhmät', 'Hallitusryhmät']\n\n  const votes_distribution = votes.map(vote => {\n    const jsonData = JSON.parse(vote.distribution.replace(/'/g, '\"'))\n    const filteredDist = jsonData.distr.filter(\n      dist => !ignored_groups.includes(dist.group)\n    )\n    return { ...vote, distribution: filteredDist }\n  })\n\n  return votes_distribution\n}\n\nexport const getTotalDistribution = votes => {\n  const total_votes = {\n    for: 0,\n    against: 0,\n    empty: 0,\n    away: 0,\n  }\n\n  votes.forEach(vote => {\n    Object.keys(vote.vote_counts).forEach(\n      key => (total_votes[key] += vote.vote_counts[key])\n    )\n  })\n  return total_votes\n}\n","import React from 'react'\nimport { Paper, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles(theme => {\n  return {\n    tooltip: {\n      padding: theme.spacing(1),\n    },\n    tooltipValue: {\n      lineHeight: 'unset',\n    },\n  }\n})\n\nconst VotesDialogBarChartHint = ({ data, barChartHint, voteTypes }) => {\n  const classes = useStyles()\n\n  if (barChartHint) {\n    return (\n      <Paper className={classes.tooltip} elevation={8}>\n        <Typography variant=\"subtitle1\">{barChartHint.y}</Typography>\n        {Object.entries(\n          data.filter(item => item.group === barChartHint.y)[0]['vote_counts']\n        ).map((item, id) => (\n          <Typography\n            variant=\"overline\"\n            component=\"p\"\n            key={id}\n            className={classes.tooltipValue}\n          >\n            {voteTypes[item[0]]}: <b>{item[1]}</b>\n          </Typography>\n        ))}\n      </Paper>\n    )\n  } else {\n    return ''\n  }\n}\n\nVotesDialogBarChartHint.propTypes = {}\n\nexport default VotesDialogBarChartHint\n","import React, { useState } from 'react'\nimport {\n  FlexibleWidthXYPlot,\n  XAxis,\n  YAxis,\n  HorizontalBarSeries,\n  Hint,\n} from 'react-vis'\nimport VotesDialogBarChartHint from './VotesDialogBarChartHint'\n\nconst VotesDialogBarChart = ({ voteTypes, diagramColors, data }) => {\n  const [barChartHint, setBarChartHint] = useState(null)\n\n  return (\n    <FlexibleWidthXYPlot\n      colorType=\"literal\"\n      height={300}\n      stackBy=\"x\"\n      yType=\"ordinal\"\n      margin={{ left: 250 }}\n    >\n      <XAxis style={{ text: { fontSize: '12px' } }} />\n      <YAxis style={{ text: { fontSize: '12px' } }} />\n      {Object.keys(voteTypes).map(voteType => (\n        <HorizontalBarSeries\n          key={voteType}\n          data={data.reverse().map(item => ({\n            y: item.group,\n            color: diagramColors[voteType],\n            x: item.vote_counts[voteType],\n          }))}\n          onValueMouseOver={v => setBarChartHint(v)}\n          onSeriesMouseOut={v => setBarChartHint(null)}\n        />\n      ))}\n      {barChartHint && (\n        <Hint value={barChartHint}>\n          <VotesDialogBarChartHint\n            barChartHint={barChartHint}\n            data={data}\n            voteTypes={voteTypes}\n          />\n        </Hint>\n      )}\n    </FlexibleWidthXYPlot>\n  )\n}\n\nVotesDialogBarChart.propTypes = {}\n\nexport default VotesDialogBarChart\n","import React from 'react'\nimport { RadialChart } from 'react-vis'\nimport { getTotalDistribution } from './voteUtils'\n\nconst processDataForTotalDiagram = (data, diagramColors, voteTypes) => {\n  return Object.keys(data).map(item => ({\n    label: String(data[item]),\n    color: diagramColors[item],\n    angle: data[item],\n  }))\n}\n\nconst VotesDialogRadialChart = ({ data, diagramColors, voteTypes }) => {\n  return (\n    <RadialChart\n      colorType=\"literal\"\n      animation={true}\n      data={processDataForTotalDiagram(\n        getTotalDistribution(data),\n        diagramColors,\n        voteTypes\n      )}\n      width={320}\n      height={300}\n      margin={{ left: 30, right: 30, top: 20, bottom: 20 }}\n      innerRadius={80}\n      radius={130}\n      padAngle={0.04}\n      showLabels={true}\n      labelsRadiusMultiplier={1.2}\n      labelsStyle={{ fontSize: 14 }}\n    />\n  )\n}\n\nVotesDialogRadialChart.propTypes = {}\n\nexport default VotesDialogRadialChart\n","import React from 'react'\nimport { Typography, Grid } from '@material-ui/core'\nimport 'react-vis/dist/style.css'\nimport VotesDialogBarChart from './VotesDialogBarChart'\nimport VotesDialogRadialChart from './VotesDialogRadialChart'\n\nconst VotesDialogContentCreator = ({\n  voteTypes,\n  diagramColors,\n  data,\n  annulled,\n  classes,\n}) => {\n  return (\n    <div>\n      <Grid container spacing={1}>\n        <Grid item xs={12} md={4}>\n          <Typography variant=\"h6\" className={classes.title} gutterBottom>\n            {Number(annulled) === 1 ? (\n              <span style={{ color: 'red' }}>ANNULLED</span>\n            ) : (\n              <span>Total</span>\n            )}\n          </Typography>\n          <VotesDialogRadialChart\n            data={data}\n            voteTypes={voteTypes}\n            diagramColors={diagramColors}\n          />\n        </Grid>\n        <Grid item xs={12} md={8}>\n          <Typography variant=\"h6\" className={classes.title} gutterBottom>\n            Per party\n          </Typography>\n          <VotesDialogBarChart\n            data={data}\n            voteTypes={voteTypes}\n            diagramColors={diagramColors}\n          />\n        </Grid>\n      </Grid>\n    </div>\n  )\n}\n\nexport default VotesDialogContentCreator\n","import React from 'react'\nimport { Grid, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles(theme => {\n  return {\n    legendWrapper: {},\n    legendItem: {\n      display: 'flex',\n      alignItems: 'center',\n      marginRight: theme.spacing(3),\n    },\n    legendColorBlock: {\n      display: 'inline-block',\n      marginRight: theme.spacing(1),\n      height: theme.spacing(3),\n      width: theme.spacing(5),\n    },\n  }\n})\n\nconst VotesDialogLegend = ({ voteTypes, diagramColors }) => {\n  const classes = useStyles()\n  return (\n    <Grid\n      container\n      item\n      xs={12}\n      justify={'center'}\n      className={classes.legendWrapper}\n    >\n      {Object.keys(voteTypes).map((voteType, id) => (\n        <div className={classes.legendItem} key={id}>\n          <div\n            className={classes.legendColorBlock}\n            style={{ backgroundColor: diagramColors[voteType] }}\n          ></div>\n          <Typography variant=\"overline\">{voteTypes[voteType]}</Typography>\n        </div>\n      ))}\n    </Grid>\n  )\n}\n\nVotesDialogLegend.propTypes = {}\n\nexport default VotesDialogLegend\n","import React from 'react'\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  makeStyles,\n  Typography,\n} from '@material-ui/core'\nimport 'react-vis/dist/style.css'\nimport VotesDialogContentCreator from './VotesDialogContentCreator'\nimport VotesDialogLegend from './VotesDialogLegend'\nimport shortid from 'shortid'\n\nconst useStyles = makeStyles(theme => {\n  return {\n    root: {},\n    donutPlot: {},\n    xyPlot: {},\n  }\n})\n\nconst diagramColors = {\n  for: '#145ba3',\n  against: '#b354aa',\n  away: '#ff5c6e',\n  empty: '#ffa600',\n}\n\nconst voteTypes = {\n  for: 'jaa (yes)',\n  against: 'ei (no)',\n  away: 'poissa (away)',\n  empty: 'tyhjiä (empty)',\n}\n\nconst VotesDialog = ({ data, dialogOpen, setDialogOpen }) => {\n  const classes = useStyles()\n  return (\n    <div>\n      <Dialog\n        onClose={() => setDialogOpen(false)}\n        aria-labelledby=\"customized-dialog-title\"\n        open={dialogOpen}\n        fullWidth={true}\n        maxWidth={'lg'}\n        scroll={'paper'}\n      >\n        <DialogTitle\n          id=\"customized-dialog-title\"\n          onClose={() => setDialogOpen(false)}\n        >\n          Votes distribution\n        </DialogTitle>\n        <DialogContent dividers>\n          <Typography variant=\"h5\" gutterBottom>\n            {data.decision}\n          </Typography>\n          <br />\n          <br />\n          {data.votes.map(vote => (\n            <VotesDialogContentCreator\n              key={vote.session + '_' + shortid.generate()}\n              voteTypes={voteTypes}\n              diagramColors={diagramColors}\n              data={vote.distribution}\n              annuled={vote.annulled}\n              classes={classes}\n            />\n          ))}\n        </DialogContent>\n        <DialogActions>\n          <VotesDialogLegend\n            voteTypes={voteTypes}\n            diagramColors={diagramColors}\n          />\n          <Button onClick={() => setDialogOpen(false)} color=\"primary\">\n            Hide\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nVotesDialog.propTypes = {}\n\nexport default VotesDialog\n","import React, { useMemo, useState } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n  VerticalTimeline,\n  VerticalTimelineElement,\n} from 'react-vertical-timeline-component'\nimport { timelineStyles } from './theme'\nimport shortid from 'shortid'\nimport { DateTime } from 'luxon'\nimport Tag from './Tag'\n//import initialData from './data/votes_keywords_distributions.json'\nimport initialData from './data/votes_with_sessions.json'\nimport PaginationControllers, { paginate } from './PaginationControllers'\nimport { Typography, Button } from '@material-ui/core'\nimport { fixJson } from './voteUtils'\nimport VotesDialog from './VotesDialog'\nimport { Icon } from 'semantic-ui-react'\n\nconst useStyles = makeStyles(theme => {\n  return {\n    root: {},\n    timeline: {\n      minHeight: '100%',\n      '&:before': {\n        background: theme.palette.common.black,\n      },\n    },\n    timelineElement: {\n      padding: 0,\n    },\n    time: {\n      color: theme.palette.text.primary,\n    },\n    title: {\n      color: theme.palette.text.primary,\n      paddingLeft: '0.2rem',\n      paddingRight: '0.2rem',\n      margin: theme.spacing(1),\n    },\n    content: {\n      color: theme.palette.text.primary,\n      paddingLeft: '0.2rem',\n      paddingRight: '0.2rem',\n      margin: theme.spacing(1) + 'px !important',\n    },\n    contentButton: {\n      marginLeft: theme.spacing(1),\n    },\n    proposalLink: {\n      lineHeight: 1,\n    },\n  }\n})\n\nconst getLink = id => {\n  const baseLink =\n    'https://www.eduskunta.fi/FI/vaski/KasittelytiedotValtiopaivaasia/Sivut/'\n  var typeAndNumber = id.split(' ')\n  var sessionAndYear = typeAndNumber[1].split('/')\n  return `${baseLink}${typeAndNumber[0]}_${sessionAndYear[0]}+${\n    sessionAndYear[1]\n  }.aspx`\n}\n\nconst filterDataWithUrl = (data, queryParams) => {\n  const dateParam = queryParams.get('date')\n  const yearParam = queryParams.get('year')\n  const monthParam = queryParams.get('month')\n  const searchParam = queryParams.get('search')\n\n  if (searchParam) {\n    return filterWithSearch(data, searchParam)\n  } else if (dateParam) {\n    return data.filter(\n      item => DateTime.fromISO(item.date).toISODate() === dateParam\n    )\n  } else if (yearParam && monthParam) {\n    return data.filter(\n      item =>\n        DateTime.fromISO(item.date).year === Number(yearParam) &&\n        DateTime.fromISO(item.date).month === Number(monthParam)\n    )\n  }\n  return data\n}\n\nconst filterWithSearch = (data, searchFilter) => {\n  if (!searchFilter || searchFilter === '') return data\n  return data.filter(item => {\n    let found = false\n    item.keyword_list.forEach(obj => {\n      if (obj.includes(searchFilter)) {\n        found = true\n      }\n    })\n    if (\n      item.id.includes(searchFilter) ||\n      item.title.includes(searchFilter) ||\n      item.summary.includes(searchFilter)\n    ) {\n      found = true\n    }\n\n    return found\n  })\n}\n\nconst getSearchMatches = (keywords, id, queryParams) => {\n  const searchParam = queryParams.get('search')\n  if (!searchParam || searchParam === '') return []\n  const matches = keywords.filter(keyword => keyword.includes(searchParam))\n  if (id.includes(searchParam)) {\n    matches.push(id)\n  }\n  return matches\n}\n\nconst PerVoteTimeline = props => {\n  const location = useLocation()\n  const classes = useStyles()\n  const queryParams = new URLSearchParams(location.search)\n  const data = useMemo(() => filterDataWithUrl(initialData, queryParams), [\n    queryParams,\n  ])\n  const [page, setPage] = useState(0)\n  const [perPage] = useState(10)\n  const [dialogOpen, setDialogOpen] = useState(false)\n  const [votesData, setVotesData] = useState({ decision: '', votes: [] })\n\n  return (\n    <React.Fragment>\n      <VerticalTimeline\n        animate={true}\n        layout=\"1-column\"\n        className={classes.timeline}\n      >\n        {data.length === 0 ? (\n          <VerticalTimelineElement\n            className={classes.timelineelement}\n            contentStyle={timelineStyles.default.content}\n            contentArrowStyle={timelineStyles.default.arrow}\n            iconStyle={timelineStyles.alternative.icon}\n            position=\"right\"\n          >\n            <h3 className={classes.time}>No matches found.</h3>\n          </VerticalTimelineElement>\n        ) : (\n          paginate(data, page, perPage).map(item => (\n            <VerticalTimelineElement\n              key={item.id + '_' + item.vote_id}\n              className={classes.timelineelement}\n              contentStyle={timelineStyles.default.content}\n              contentArrowStyle={timelineStyles.default.arrow}\n              iconStyle={timelineStyles.alternative.icon}\n              iconOnClick={() => {\n                setVotesData({\n                  decision: item.decision,\n                  votes: fixJson(item.votes),\n                })\n                setDialogOpen(true)\n              }}\n              position=\"right\"\n            >\n              <h3 className={classes.time}>\n                {DateTime.fromISO(item.date).toFormat('DDD')}\n              </h3>\n\n              <Typography\n                variant=\"h6\"\n                component=\"h5\"\n                className={classes.title}\n                gutterBottom\n              >\n                {item.id + ' - ' + item.title}\n              </Typography>\n\n              {getSearchMatches(item.keyword_list, item.id, queryParams)\n                .length !== 0 && (\n                <Typography\n                  variant=\"subtitle2\"\n                  component=\"h6\"\n                  className={classes.content}\n                  display=\"inline\"\n                  gutterBottom\n                >\n                  Search matches:\n                </Typography>\n              )}\n\n              {getSearchMatches(item.keyword_list, item.id, queryParams).map(\n                (keyword, i, array) => (\n                  <Tag\n                    key={\n                      DateTime.fromSQL(item.created).toISO() +\n                      '_tag_' +\n                      shortid.generate()\n                    }\n                    text={keyword}\n                    size={1}\n                  />\n                )\n              )}\n\n              <Typography\n                variant=\"body1\"\n                component=\"h6\"\n                className={classes.content}\n                gutterBottom\n              >\n                {item.summary}\n              </Typography>\n\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                className={classes.contentButton}\n                onClick={() => {\n                  setVotesData({\n                    decision: item.decision,\n                    votes: fixJson(item.votes),\n                  })\n                  setDialogOpen(true)\n                }}\n              >\n                votes\n              </Button>\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                as=\"a\"\n                target=\"_blank\"\n                href={getLink(item.id)}\n                className={classes.contentButton}\n              >\n                <Icon\n                  className={classes.proposalLink}\n                  name=\"external alternate\"\n                />\n                View proposal\n              </Button>\n\n              <br />\n            </VerticalTimelineElement>\n          ))\n        )}\n        <PaginationControllers\n          page={page}\n          setPage={setPage}\n          perPage={perPage}\n          dataSize={data.length}\n        />\n      </VerticalTimeline>\n      <VotesDialog\n        data={votesData}\n        dialogOpen={dialogOpen}\n        setDialogOpen={setDialogOpen}\n      />\n    </React.Fragment>\n  )\n}\n\nPerVoteTimeline.propTypes = {}\n\nexport default PerVoteTimeline\n\n/*<Typography\n              variant=\"body1\"\n              component=\"h6\"\n              className={classes.content}\n              gutterBottom\n            >\n              {JSON.stringify(getTotalDistribution(item.distribution))}\n            </Typography> */\n"],"sourceRoot":""}